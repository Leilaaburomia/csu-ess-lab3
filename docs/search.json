[
  {
    "objectID": "lab-03.html",
    "href": "lab-03.html",
    "title": "Lab 3: COVID-19",
    "section": "",
    "text": "library(tidyverse)\n\nWarning: package 'tidyverse' was built under R version 4.4.2\n\n\nWarning: package 'readr' was built under R version 4.4.2\n\n\nWarning: package 'forcats' was built under R version 4.4.2\n\n\nWarning: package 'lubridate' was built under R version 4.4.2\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(flextable)\n\nWarning: package 'flextable' was built under R version 4.4.2\n\n\n\nAttaching package: 'flextable'\n\nThe following object is masked from 'package:purrr':\n\n    compose\n\nlibrary(zoo)\n\n\nAttaching package: 'zoo'\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\nlibrary(dplyr)"
  },
  {
    "objectID": "lab-03.html#question-1-public-data",
    "href": "lab-03.html#question-1-public-data",
    "title": "Lab 3: COVID-19",
    "section": "Question 1: Public Data",
    "text": "Question 1: Public Data\nLong-term datasets help scientists detect climate trends like rising temps, changing precipitation, and extreme weather. Without continuous data, it is difficult to connect climate changes to its cause, like natural variability or human activity. Resource management relies on long term environmental data to make informed decisions about agriculture, conservation, fisheries, or water allocation. Gaps in this data may lead to mismanagement. Scientific progress suffers when environmental data disappears. This loss disrupts trend analysis, regulations, and public trust in environmental policies. Collaborative stewardship plays a essential role in preserving data integrity. This collaboration creates accessibility and transparency."
  },
  {
    "objectID": "lab-03.html#question-2-daily-summary",
    "href": "lab-03.html#question-2-daily-summary",
    "title": "Lab 3: COVID-19",
    "section": "Question 2: Daily Summary",
    "text": "Question 2: Daily Summary\n\n## 2.1.\nlibrary(readr)\ndata &lt;- read_csv(\"https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv\")\n\nRows: 2502832 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (3): county, state, fips\ndbl  (2): cases, deaths\ndate (1): date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n## 2.2.\nmy.date &lt;- as.Date(\"2022-02-01\")\nclass(my.date)\n\n[1] \"Date\"\n\nmy.state &lt;- \"Colorado\"\nclass(my.state)\n\n[1] \"character\"\n\n## 2.3. \ncolorado_data &lt;- data %&gt;%\n    filter(state == \"Colorado\") %&gt;%\n    group_by(county) %&gt;%\n    arrange(county, date) %&gt;%\n    mutate(\n      new_cases = cases - lag(cases),\n      new_deaths = deaths - lag(cases)\n    ) %&gt;%\n  ungroup()\n\nhead(colorado_data)\n\n# A tibble: 6 × 8\n  date       county state    fips  cases deaths new_cases new_deaths\n  &lt;date&gt;     &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;\n1 2020-03-12 Adams  Colorado 08001     2      0        NA         NA\n2 2020-03-13 Adams  Colorado 08001     3      0         1         -2\n3 2020-03-14 Adams  Colorado 08001     6      0         3         -3\n4 2020-03-15 Adams  Colorado 08001     6      0         0         -6\n5 2020-03-16 Adams  Colorado 08001     8      0         2         -6\n6 2020-03-17 Adams  Colorado 08001    10      0         2         -8\n\n## 2.4. \nlibrary(flextable)\n\ncumulative_cases &lt;- colorado_data %&gt;%\n  filter(date == my.date) %&gt;%\n  arrange(desc(cases)) %&gt;% \n  select(county, cases) %&gt;%\n  head(5)\n\ntop_new_cases &lt;- colorado_data %&gt;%\n  filter(date == my.date) %&gt;%\n  arrange(desc(new_cases)) %&gt;%\n  select(county, new_cases) %&gt;%\n  head(5)\n\nft &lt;- flextable(head(cumulative_cases))\nft &lt;- add_header_lines(ft, \"Top 5 Colorado Counties with the Most Cumulative Covid19 Cases\")\nft\n\nTop 5 Colorado Counties with the Most Cumulative Covid19 CasescountycasesEl Paso170,673Denver159,022Arapahoe144,255Adams126,768Jefferson113,240\n\nft1 &lt;- flextable(head(top_new_cases))\nft1 &lt;- add_header_lines(ft1, \"Top 5 Colorado Counties with the Most New Covid19 Cases\")\nft1\n\nTop 5 Colorado Counties with the Most New Covid19 Casescountynew_casesEl Paso630Arapahoe401Denver389Adams326Jefferson291"
  },
  {
    "objectID": "lab-03.html#question-3.-normalizing-data",
    "href": "lab-03.html#question-3.-normalizing-data",
    "title": "Lab 3: COVID-19",
    "section": "Question 3. Normalizing Data",
    "text": "Question 3. Normalizing Data\n\npop_data &lt;- read_csv(\"https://www2.census.gov/programs-surveys/popest/datasets/2020-2023/counties/totals/co-est2023-alldata.csv\") \n\nRows: 3195 Columns: 67\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (5): SUMLEV, STATE, COUNTY, STNAME, CTYNAME\ndbl (62): REGION, DIVISION, ESTIMATESBASE2020, POPESTIMATE2020, POPESTIMATE2...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n## 3.1. \nformatted_pop_data &lt;- pop_data %&gt;%\n  filter(COUNTY !=\"000\") %&gt;%\n  mutate(\n    formatted_STATE = sprintf(\"%02s\", STATE),\n    formatted_COUNTY = sprintf(\"%03s\", COUNTY),\n    fips = paste0(formatted_STATE, formatted_COUNTY)\n    ) %&gt;%\n  select(contains(\"NAME\"), contains(\"2021\"), fips)\n  \n  \n## 3.2. \nprint(formatted_pop_data)\n\n# A tibble: 3,144 × 19\n   STNAME  CTYNAME         POPESTIMATE2021 NPOPCHG2021 BIRTHS2021 DEATHS2021\n   &lt;chr&gt;   &lt;chr&gt;                     &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;\n 1 Alabama Autauga County            59203         288        686        696\n 2 Alabama Baldwin County           239439        6212       2337       2948\n 3 Alabama Barbour County            24533        -436        270        390\n 4 Alabama Bibb County               22359         171        240        325\n 5 Alabama Blount County             59079         -28        654        875\n 6 Alabama Bullock County            10143         -86        111        160\n 7 Alabama Butler County             18890        -135        227        297\n 8 Alabama Calhoun County           115678        -565       1250       1843\n 9 Alabama Chambers County           34488        -163        392        592\n10 Alabama Cherokee County           25074         105        254        442\n# ℹ 3,134 more rows\n# ℹ 13 more variables: NATURALCHG2021 &lt;dbl&gt;, INTERNATIONALMIG2021 &lt;dbl&gt;,\n#   DOMESTICMIG2021 &lt;dbl&gt;, NETMIG2021 &lt;dbl&gt;, RESIDUAL2021 &lt;dbl&gt;,\n#   GQESTIMATES2021 &lt;dbl&gt;, RBIRTH2021 &lt;dbl&gt;, RDEATH2021 &lt;dbl&gt;,\n#   RNATURALCHG2021 &lt;dbl&gt;, RINTERNATIONALMIG2021 &lt;dbl&gt;, RDOMESTICMIG2021 &lt;dbl&gt;,\n#   RNETMIG2021 &lt;dbl&gt;, fips &lt;chr&gt;\n\ndim(formatted_pop_data)\n\n[1] 3144   19\n\nsummary(formatted_pop_data)\n\n    STNAME            CTYNAME          POPESTIMATE2021    NPOPCHG2021       \n Length:3144        Length:3144        Min.   :     54   Min.   :-183351.0  \n Class :character   Class :character   1st Qu.:  10820   1st Qu.:    -95.0  \n Mode  :character   Mode  :character   Median :  25808   Median :     22.0  \n                                       Mean   : 105614   Mean   :    166.0  \n                                       3rd Qu.:  68448   3rd Qu.:    300.5  \n                                       Max.   :9809462   Max.   :  54379.0  \n   BIRTHS2021        DEATHS2021    NATURALCHG2021     INTERNATIONALMIG2021\n Min.   :    0.0   Min.   :    0   Min.   :-6505.00   Min.   : -170.0     \n 1st Qu.:  113.0   1st Qu.:  159   1st Qu.: -138.00   1st Qu.:    1.0     \n Median :  271.5   Median :  364   Median :  -54.00   Median :    5.0     \n Mean   : 1140.1   Mean   : 1094   Mean   :   46.45   Mean   :  119.6     \n 3rd Qu.:  731.2   3rd Qu.:  868   3rd Qu.:   -3.00   3rd Qu.:   28.0     \n Max.   :94553.0   Max.   :88930   Max.   :26137.00   Max.   :15109.0     \n DOMESTICMIG2021       NETMIG2021         RESIDUAL2021   GQESTIMATES2021   \n Min.   :-194712.0   Min.   :-182605.0   Min.   :-6706   Min.   :     0.0  \n 1st Qu.:    -55.0   1st Qu.:    -45.0   1st Qu.:   -4   1st Qu.:   161.0  \n Median :     59.0   Median :     69.0   Median :    3   Median :   569.5  \n Mean   :      0.0   Mean   :    119.6   Mean   :    0   Mean   :  2518.3  \n 3rd Qu.:    370.5   3rd Qu.:    394.0   3rd Qu.:   17   3rd Qu.:  2131.5  \n Max.   :  42990.0   Max.   :  48504.0   Max.   : 1819   Max.   :180225.0  \n   RBIRTH2021       RDEATH2021    RNATURALCHG2021    RINTERNATIONALMIG2021\n Min.   : 0.000   Min.   : 0.00   Min.   :-50.4202   Min.   :-2.05195     \n 1st Qu.: 9.252   1st Qu.:11.02   1st Qu.: -5.8242   1st Qu.: 0.01943     \n Median :10.504   Median :13.63   Median : -3.0601   Median : 0.21517     \n Mean   :10.671   Mean   :13.61   Mean   : -2.9353   Mean   : 0.46603     \n 3rd Qu.:11.935   3rd Qu.:16.02   3rd Qu.: -0.1956   3rd Qu.: 0.57457     \n Max.   :30.726   Max.   :50.42   Max.   : 21.2690   Max.   :15.76263     \n RDOMESTICMIG2021    RNETMIG2021           fips          \n Min.   :-120.725   Min.   :-119.572   Length:3144       \n 1st Qu.:  -3.393   1st Qu.:  -3.012   Class :character  \n Median :   3.509   Median :   4.000   Mode  :character  \n Mean   :   4.749   Mean   :   5.215                     \n 3rd Qu.:  11.971   3rd Qu.:  12.353                     \n Max.   : 116.031   Max.   : 117.826                     \n\ncolnames(formatted_pop_data)\n\n [1] \"STNAME\"                \"CTYNAME\"               \"POPESTIMATE2021\"      \n [4] \"NPOPCHG2021\"           \"BIRTHS2021\"            \"DEATHS2021\"           \n [7] \"NATURALCHG2021\"        \"INTERNATIONALMIG2021\"  \"DOMESTICMIG2021\"      \n[10] \"NETMIG2021\"            \"RESIDUAL2021\"          \"GQESTIMATES2021\"      \n[13] \"RBIRTH2021\"            \"RDEATH2021\"            \"RNATURALCHG2021\"      \n[16] \"RINTERNATIONALMIG2021\" \"RDOMESTICMIG2021\"      \"RNETMIG2021\"          \n[19] \"fips\"                 \n\n## 3.3. \nColorado_counties_pop &lt;- formatted_pop_data %&gt;%\n  filter(STNAME == \"Colorado\") %&gt;%\n  summarise(\n    pop_min = min(POPESTIMATE2021, na.rm = TRUE),\n    pop_max = max(POPESTIMATE2021, na.rm = TRUE)\n  )\nprint(Colorado_counties_pop)\n\n# A tibble: 1 × 2\n  pop_min pop_max\n    &lt;dbl&gt;   &lt;dbl&gt;\n1     741  737287\n\n\n3.2. The modified dataset contains county-level population estimates for 2021, along with county and state names. The FIP column uniquely identifies states. The data set has 3144 rows and 19 columns after filtering. The names of the columns include “STNAME”, “CTYNAME”, “POPESTIMATE2021”, “NPOPCHG2021”, “BIRTHS2021”, “DEATHS2021”, etc. Both the covid data and modified population data have FIPs columns.\n3.3. The range of populations found in Colorado counties in 2021 is from 741 to 737287 population number.\n\n## 3.4. \nmerged_data &lt;- colorado_data %&gt;%\n  inner_join(formatted_pop_data, by = \"fips\")\n\nhead(merged_data)\n\n# A tibble: 6 × 26\n  date       county state fips  cases deaths new_cases new_deaths STNAME CTYNAME\n  &lt;date&gt;     &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  \n1 2020-03-12 Adams  Colo… 08001     2      0        NA         NA Color… Adams …\n2 2020-03-13 Adams  Colo… 08001     3      0         1         -2 Color… Adams …\n3 2020-03-14 Adams  Colo… 08001     6      0         3         -3 Color… Adams …\n4 2020-03-15 Adams  Colo… 08001     6      0         0         -6 Color… Adams …\n5 2020-03-16 Adams  Colo… 08001     8      0         2         -6 Color… Adams …\n6 2020-03-17 Adams  Colo… 08001    10      0         2         -8 Color… Adams …\n# ℹ 16 more variables: POPESTIMATE2021 &lt;dbl&gt;, NPOPCHG2021 &lt;dbl&gt;,\n#   BIRTHS2021 &lt;dbl&gt;, DEATHS2021 &lt;dbl&gt;, NATURALCHG2021 &lt;dbl&gt;,\n#   INTERNATIONALMIG2021 &lt;dbl&gt;, DOMESTICMIG2021 &lt;dbl&gt;, NETMIG2021 &lt;dbl&gt;,\n#   RESIDUAL2021 &lt;dbl&gt;, GQESTIMATES2021 &lt;dbl&gt;, RBIRTH2021 &lt;dbl&gt;,\n#   RDEATH2021 &lt;dbl&gt;, RNATURALCHG2021 &lt;dbl&gt;, RINTERNATIONALMIG2021 &lt;dbl&gt;,\n#   RDOMESTICMIG2021 &lt;dbl&gt;, RNETMIG2021 &lt;dbl&gt;\n\nmerged_data &lt;- merged_data %&gt;%\n  mutate(\n    percapita_cumulative_cases = cases / POPESTIMATE2021,\n    percapita_new_cases = new_cases / POPESTIMATE2021,\n    percapita_new_deaths = new_deaths / POPESTIMATE2021\n  )\n\nhead(merged_data)\n\n# A tibble: 6 × 29\n  date       county state fips  cases deaths new_cases new_deaths STNAME CTYNAME\n  &lt;date&gt;     &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  \n1 2020-03-12 Adams  Colo… 08001     2      0        NA         NA Color… Adams …\n2 2020-03-13 Adams  Colo… 08001     3      0         1         -2 Color… Adams …\n3 2020-03-14 Adams  Colo… 08001     6      0         3         -3 Color… Adams …\n4 2020-03-15 Adams  Colo… 08001     6      0         0         -6 Color… Adams …\n5 2020-03-16 Adams  Colo… 08001     8      0         2         -6 Color… Adams …\n6 2020-03-17 Adams  Colo… 08001    10      0         2         -8 Color… Adams …\n# ℹ 19 more variables: POPESTIMATE2021 &lt;dbl&gt;, NPOPCHG2021 &lt;dbl&gt;,\n#   BIRTHS2021 &lt;dbl&gt;, DEATHS2021 &lt;dbl&gt;, NATURALCHG2021 &lt;dbl&gt;,\n#   INTERNATIONALMIG2021 &lt;dbl&gt;, DOMESTICMIG2021 &lt;dbl&gt;, NETMIG2021 &lt;dbl&gt;,\n#   RESIDUAL2021 &lt;dbl&gt;, GQESTIMATES2021 &lt;dbl&gt;, RBIRTH2021 &lt;dbl&gt;,\n#   RDEATH2021 &lt;dbl&gt;, RNATURALCHG2021 &lt;dbl&gt;, RINTERNATIONALMIG2021 &lt;dbl&gt;,\n#   RDOMESTICMIG2021 &lt;dbl&gt;, RNETMIG2021 &lt;dbl&gt;,\n#   percapita_cumulative_cases &lt;dbl&gt;, percapita_new_cases &lt;dbl&gt;, …\n\n\n\n## 3.5.\n\n## flextable 1\nmost_cumulative_cases_per_capita &lt;- merged_data %&gt;%\n  filter(date == \"2021-01-01\") %&gt;%\n  arrange(desc(percapita_cumulative_cases)) %&gt;%\n  select(county, percapita_cumulative_cases) %&gt;%\n  slice_head(n = 5)\n  \n\ncumulativecasesft &lt;- flextable(head(most_cumulative_cases_per_capita)) %&gt;%\n  set_header_labels(capita_cumulative_cases = \"cumulative cases\")\n  \ncumulativecasesft &lt;- add_header_lines(cumulativecasesft, \"Top 5 Colorado Counties with the Most Cumulative Cases Per Capita 2021-01-01\")\n  \ncumulativecasesft\n\nTop 5 Colorado Counties with the Most Cumulative Cases Per Capita 2021-01-01countypercapita_cumulative_casesCrowley0.28945074Bent0.21090092Logan0.15467009Lincoln0.14306596Fremont0.09507078\n\n## Flextable 2\nmost_new_cases_per_capita &lt;- merged_data %&gt;%\n  filter(date == \"2021-01-01\") %&gt;%\n  arrange(desc(percapita_new_cases)) %&gt;%\n  select(county, percapita_new_cases) %&gt;%\n  slice_head(n = 5)\n\nnewcasesft &lt;- flextable(head(most_new_cases_per_capita))\n\nnewcasesft &lt;- add_header_lines(newcasesft, \"Top 5 Colorado Counties with the Most New Cases Per Capita 2021-01-01\")\n\nnewcasesft\n\nTop 5 Colorado Counties with the Most New Cases Per Capita 2021-01-01countypercapita_new_casesBent0.016669788Sedgwick0.003439381Chaffee0.002634112Crowley0.002266783Mineral0.002152853"
  },
  {
    "objectID": "lab-03.html#question-4-rolling-thresholds",
    "href": "lab-03.html#question-4-rolling-thresholds",
    "title": "Lab 3: COVID-19",
    "section": "Question 4: Rolling thresholds",
    "text": "Question 4: Rolling thresholds\n\nlatest_date &lt;- max(merged_data$date)\nfiltered_merged_data &lt;- merged_data %&gt;%\n  filter(date &gt;= (latest_date - 13))\n\ncounty_cases &lt;- filtered_merged_data %&gt;%\n  group_by(county) %&gt;%\n  summarize(\n    total_cases_last_14_days = sum(new_cases, na.rm = TRUE), population = max(POPESTIMATE2021, na.rm = TRUE), cases_per_100k = (total_cases_last_14_days / population) * 100000) %&gt;%\n  arrange(desc(cases_per_100k))\n\ntop_5 &lt;- head(county_cases, 5)\nprint(top_5)\n\n# A tibble: 5 × 4\n  county    total_cases_last_14_days population cases_per_100k\n  &lt;chr&gt;                        &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;\n1 Mineral                          8        929           861.\n2 Boulder                       2437     327084           745.\n3 Larimer                       1943     362747           536.\n4 Denver                        3784     711467           532.\n5 Jefferson                     2646     580703           456.\n\nwatchlist_count &lt;- county_cases %&gt;%\n  filter(cases_per_100k &gt; 100) %&gt;%\n  nrow()\n\ncat(\"Number of counties meeting the watch list condition:\", watchlist_count, \"\\n\")\n\nNumber of counties meeting the watch list condition: 53 \n\n\nAnswer 4. 53 Colorado counties meet the watch list condition of more than 100 new cases per 100,000 residents over the past 14 days."
  },
  {
    "objectID": "lab-03.html#question-5-death-toll",
    "href": "lab-03.html#question-5-death-toll",
    "title": "Lab 3: COVID-19",
    "section": "Question 5: Death Toll",
    "text": "Question 5: Death Toll\n\nlibrary(ggplot2)\nlibrary(lubridate)\n\ncounty_death_ratios &lt;- merged_data %&gt;%\n  filter(str_detect(date, \"2021\")) %&gt;%\n  filter(str_detect(date, \"12-31\")) %&gt;%\n  mutate(covid_death_ratio = deaths/DEATHS2021) %&gt;%\n  filter(covid_death_ratio &gt;= 0.20)\n\n\nprint(county_death_ratios)\n\n# A tibble: 35 × 30\n   date       county     state   fips   cases deaths new_cases new_deaths STNAME\n   &lt;date&gt;     &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt; \n 1 2021-12-31 Adams      Colora… 08001  95323   1099       915     -93309 Color…\n 2 2021-12-31 Alamosa    Colora… 08003   3101     56        14      -3031 Color…\n 3 2021-12-31 Arapahoe   Colora… 08005 103551   1075      1446    -101030 Color…\n 4 2021-12-31 Bent       Colora… 08011   1958     42         4      -1912 Color…\n 5 2021-12-31 Broomfield Colora… 08014   8767     97       133      -8537 Color…\n 6 2021-12-31 Chaffee    Colora… 08015   2868     38        16      -2814 Color…\n 7 2021-12-31 Cheyenne   Colora… 08017    249      8         1       -240 Color…\n 8 2021-12-31 Conejos    Colora… 08021   1193     46         1      -1146 Color…\n 9 2021-12-31 Costilla   Colora… 08023    440     13         1       -426 Color…\n10 2021-12-31 Crowley    Colora… 08025   2499     27         2      -2470 Color…\n# ℹ 25 more rows\n# ℹ 21 more variables: CTYNAME &lt;chr&gt;, POPESTIMATE2021 &lt;dbl&gt;, NPOPCHG2021 &lt;dbl&gt;,\n#   BIRTHS2021 &lt;dbl&gt;, DEATHS2021 &lt;dbl&gt;, NATURALCHG2021 &lt;dbl&gt;,\n#   INTERNATIONALMIG2021 &lt;dbl&gt;, DOMESTICMIG2021 &lt;dbl&gt;, NETMIG2021 &lt;dbl&gt;,\n#   RESIDUAL2021 &lt;dbl&gt;, GQESTIMATES2021 &lt;dbl&gt;, RBIRTH2021 &lt;dbl&gt;,\n#   RDEATH2021 &lt;dbl&gt;, RNATURALCHG2021 &lt;dbl&gt;, RINTERNATIONALMIG2021 &lt;dbl&gt;,\n#   RDOMESTICMIG2021 &lt;dbl&gt;, RNETMIG2021 &lt;dbl&gt;, …\n\nggplot(county_death_ratios, aes(x = reorder(county, covid_death_ratio), y = covid_death_ratio)) + \n  geom_bar(stat = \"identity\", fill = \"black\") +\n  coord_flip() + \n  labs(\n    title = \"Colorado Counties Where Covid Deaths ≥ 20% of Total Deaths (2021)\", \n    x = \"County\", \n    y = \"COVID Deaths as % of Total Deaths\"\n  ) + \n  scale_y_continuous(labels = scales::percent_format()) +\n  theme_minimal()"
  },
  {
    "objectID": "lab-03.html#question-6-multi-state",
    "href": "lab-03.html#question-6-multi-state",
    "title": "Lab 3: COVID-19",
    "section": "Question 6: Multi-state",
    "text": "Question 6: Multi-state\n\n## 6.1. \n\nstates_of_interest &lt;- c(\"New York\", \"Colorado\", \"Alabama\", \"Ohio\")\nstate_cases &lt;- data %&gt;%\n  filter(str_detect(state, paste(states_of_interest, collapse = \"|\"))) %&gt;%\n  group_by(date, state) %&gt;%\n  summarize(new_cases = sum(cases, na.rm = FALSE))\n\n`summarise()` has grouped output by 'date'. You can override using the\n`.groups` argument.\n\nprint(state_cases)\n\n# A tibble: 3,192 × 3\n# Groups:   date [804]\n   date       state    new_cases\n   &lt;date&gt;     &lt;chr&gt;        &lt;dbl&gt;\n 1 2020-03-01 New York         1\n 2 2020-03-02 New York         1\n 3 2020-03-03 New York         2\n 4 2020-03-04 New York        11\n 5 2020-03-05 Colorado         2\n 6 2020-03-05 New York        22\n 7 2020-03-06 Colorado         8\n 8 2020-03-06 New York        44\n 9 2020-03-07 Colorado         8\n10 2020-03-07 New York        89\n# ℹ 3,182 more rows\n\nlibrary(zoo)\nstate_cases$rolling_mean &lt;- rollmean(state_cases$new_cases, k = 7, align = \"right\", fill = NA)\n\nprint(state_cases)\n\n# A tibble: 3,192 × 4\n# Groups:   date [804]\n   date       state    new_cases rolling_mean\n   &lt;date&gt;     &lt;chr&gt;        &lt;dbl&gt;        &lt;dbl&gt;\n 1 2020-03-01 New York         1        NA   \n 2 2020-03-02 New York         1        NA   \n 3 2020-03-03 New York         2        NA   \n 4 2020-03-04 New York        11        NA   \n 5 2020-03-05 Colorado         2        NA   \n 6 2020-03-05 New York        22        NA   \n 7 2020-03-06 Colorado         8         6.71\n 8 2020-03-06 New York        44        12.9 \n 9 2020-03-07 Colorado         8        13.9 \n10 2020-03-07 New York        89        26.3 \n# ℹ 3,182 more rows\n\n\n\n## 6.2.\n\nlibrary(ggplot2)\n\nggplot(state_cases, aes(x = date)) +\n  geom_line(aes(y = new_cases, color = \"New Cases\"), linewidth = 1) +\n  geom_line(aes(y = rolling_mean, color = \"Rolling Mean\"), linewidth = 1, linetype = \"dashed\") +\n  facet_wrap(~state, scales = \"free_y\") + \n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  labs(title = \"Daily New Cases and 7-Day Rolling Mean by State\",\n       x = \"Date\",\n       y = \"Count of New Cases\",\n       color = \"Legend\") +\n  scale_color_manual(values = c(\"New Cases\" = \"blue\", \"Rolling Mean\" = \"red\"))\n\n\n\n\n\n\n\n\n\n## 6.3. \n\nfiltered_state_pop &lt;- pop_data %&gt;%\n  filter(str_detect(STNAME, paste(states_of_interest, collapse = \"|\"))) %&gt;%\n  filter(STNAME == CTYNAME) %&gt;%\n  rename(\"state\" = STNAME)\n\n\npopulation_long &lt;- filtered_state_pop %&gt;%\n  pivot_longer(cols = starts_with(\"POPESTIMATE\"),\n               names_to = \"year\",\n               values_to = \"total_population\") %&gt;%\n  mutate(year = as.numeric(gsub(\"POPESTIMATE\", \"\", year)))\n\nprint(colnames(population_long))\n\n [1] \"SUMLEV\"                \"REGION\"                \"DIVISION\"             \n [4] \"STATE\"                 \"COUNTY\"                \"state\"                \n [7] \"CTYNAME\"               \"ESTIMATESBASE2020\"     \"NPOPCHG2020\"          \n[10] \"NPOPCHG2021\"           \"NPOPCHG2022\"           \"NPOPCHG2023\"          \n[13] \"BIRTHS2020\"            \"BIRTHS2021\"            \"BIRTHS2022\"           \n[16] \"BIRTHS2023\"            \"DEATHS2020\"            \"DEATHS2021\"           \n[19] \"DEATHS2022\"            \"DEATHS2023\"            \"NATURALCHG2020\"       \n[22] \"NATURALCHG2021\"        \"NATURALCHG2022\"        \"NATURALCHG2023\"       \n[25] \"INTERNATIONALMIG2020\"  \"INTERNATIONALMIG2021\"  \"INTERNATIONALMIG2022\" \n[28] \"INTERNATIONALMIG2023\"  \"DOMESTICMIG2020\"       \"DOMESTICMIG2021\"      \n[31] \"DOMESTICMIG2022\"       \"DOMESTICMIG2023\"       \"NETMIG2020\"           \n[34] \"NETMIG2021\"            \"NETMIG2022\"            \"NETMIG2023\"           \n[37] \"RESIDUAL2020\"          \"RESIDUAL2021\"          \"RESIDUAL2022\"         \n[40] \"RESIDUAL2023\"          \"GQESTIMATESBASE2020\"   \"GQESTIMATES2020\"      \n[43] \"GQESTIMATES2021\"       \"GQESTIMATES2022\"       \"GQESTIMATES2023\"      \n[46] \"RBIRTH2021\"            \"RBIRTH2022\"            \"RBIRTH2023\"           \n[49] \"RDEATH2021\"            \"RDEATH2022\"            \"RDEATH2023\"           \n[52] \"RNATURALCHG2021\"       \"RNATURALCHG2022\"       \"RNATURALCHG2023\"      \n[55] \"RINTERNATIONALMIG2021\" \"RINTERNATIONALMIG2022\" \"RINTERNATIONALMIG2023\"\n[58] \"RDOMESTICMIG2021\"      \"RDOMESTICMIG2022\"      \"RDOMESTICMIG2023\"     \n[61] \"RNETMIG2021\"           \"RNETMIG2022\"           \"RNETMIG2023\"          \n[64] \"year\"                  \"total_population\"     \n\nstate_cases &lt;- state_cases %&gt;%\n  mutate(year = year(date)) %&gt;%\n  mutate(year = as.numeric(year))\n\n\nprint(colnames(state_cases))\n\n[1] \"date\"         \"state\"        \"new_cases\"    \"rolling_mean\" \"year\"        \n\nstate_covid_data &lt;- state_cases %&gt;%\n  left_join(population_long, by = c(\"state\", \"year\")) %&gt;%\n  mutate(cases_per_capita = new_cases / total_population)\n\nstate_covid_data\n\n# A tibble: 3,192 × 69\n# Groups:   date [804]\n   date       state    new_cases rolling_mean  year SUMLEV REGION DIVISION STATE\n   &lt;date&gt;     &lt;chr&gt;        &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;\n 1 2020-03-01 New York         1        NA     2020 040         1        2 36   \n 2 2020-03-02 New York         1        NA     2020 040         1        2 36   \n 3 2020-03-03 New York         2        NA     2020 040         1        2 36   \n 4 2020-03-04 New York        11        NA     2020 040         1        2 36   \n 5 2020-03-05 Colorado         2        NA     2020 040         4        8 08   \n 6 2020-03-05 New York        22        NA     2020 040         1        2 36   \n 7 2020-03-06 Colorado         8         6.71  2020 040         4        8 08   \n 8 2020-03-06 New York        44        12.9   2020 040         1        2 36   \n 9 2020-03-07 Colorado         8        13.9   2020 040         4        8 08   \n10 2020-03-07 New York        89        26.3   2020 040         1        2 36   \n# ℹ 3,182 more rows\n# ℹ 60 more variables: COUNTY &lt;chr&gt;, CTYNAME &lt;chr&gt;, ESTIMATESBASE2020 &lt;dbl&gt;,\n#   NPOPCHG2020 &lt;dbl&gt;, NPOPCHG2021 &lt;dbl&gt;, NPOPCHG2022 &lt;dbl&gt;, NPOPCHG2023 &lt;dbl&gt;,\n#   BIRTHS2020 &lt;dbl&gt;, BIRTHS2021 &lt;dbl&gt;, BIRTHS2022 &lt;dbl&gt;, BIRTHS2023 &lt;dbl&gt;,\n#   DEATHS2020 &lt;dbl&gt;, DEATHS2021 &lt;dbl&gt;, DEATHS2022 &lt;dbl&gt;, DEATHS2023 &lt;dbl&gt;,\n#   NATURALCHG2020 &lt;dbl&gt;, NATURALCHG2021 &lt;dbl&gt;, NATURALCHG2022 &lt;dbl&gt;,\n#   NATURALCHG2023 &lt;dbl&gt;, INTERNATIONALMIG2020 &lt;dbl&gt;, …\n\nprint(colnames(state_covid_data))\n\n [1] \"date\"                  \"state\"                 \"new_cases\"            \n [4] \"rolling_mean\"          \"year\"                  \"SUMLEV\"               \n [7] \"REGION\"                \"DIVISION\"              \"STATE\"                \n[10] \"COUNTY\"                \"CTYNAME\"               \"ESTIMATESBASE2020\"    \n[13] \"NPOPCHG2020\"           \"NPOPCHG2021\"           \"NPOPCHG2022\"          \n[16] \"NPOPCHG2023\"           \"BIRTHS2020\"            \"BIRTHS2021\"           \n[19] \"BIRTHS2022\"            \"BIRTHS2023\"            \"DEATHS2020\"           \n[22] \"DEATHS2021\"            \"DEATHS2022\"            \"DEATHS2023\"           \n[25] \"NATURALCHG2020\"        \"NATURALCHG2021\"        \"NATURALCHG2022\"       \n[28] \"NATURALCHG2023\"        \"INTERNATIONALMIG2020\"  \"INTERNATIONALMIG2021\" \n[31] \"INTERNATIONALMIG2022\"  \"INTERNATIONALMIG2023\"  \"DOMESTICMIG2020\"      \n[34] \"DOMESTICMIG2021\"       \"DOMESTICMIG2022\"       \"DOMESTICMIG2023\"      \n[37] \"NETMIG2020\"            \"NETMIG2021\"            \"NETMIG2022\"           \n[40] \"NETMIG2023\"            \"RESIDUAL2020\"          \"RESIDUAL2021\"         \n[43] \"RESIDUAL2022\"          \"RESIDUAL2023\"          \"GQESTIMATESBASE2020\"  \n[46] \"GQESTIMATES2020\"       \"GQESTIMATES2021\"       \"GQESTIMATES2022\"      \n[49] \"GQESTIMATES2023\"       \"RBIRTH2021\"            \"RBIRTH2022\"           \n[52] \"RBIRTH2023\"            \"RDEATH2021\"            \"RDEATH2022\"           \n[55] \"RDEATH2023\"            \"RNATURALCHG2021\"       \"RNATURALCHG2022\"      \n[58] \"RNATURALCHG2023\"       \"RINTERNATIONALMIG2021\" \"RINTERNATIONALMIG2022\"\n[61] \"RINTERNATIONALMIG2023\" \"RDOMESTICMIG2021\"      \"RDOMESTICMIG2022\"     \n[64] \"RDOMESTICMIG2023\"      \"RNETMIG2021\"           \"RNETMIG2022\"          \n[67] \"RNETMIG2023\"           \"total_population\"      \"cases_per_capita\"     \n\nstate_covid_data &lt;- state_covid_data %&gt;%\n  group_by(state) %&gt;%\n  arrange(state, date) %&gt;%\n  mutate(rolling_mean_per_capita = rollmean(cases_per_capita, k = 7, fill = NA, align = \"right\")) %&gt;%\n  ungroup()\n\nprint(state_covid_data)\n\n# A tibble: 3,192 × 70\n   date       state   new_cases rolling_mean  year SUMLEV REGION DIVISION STATE\n   &lt;date&gt;     &lt;chr&gt;       &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;\n 1 2020-03-13 Alabama         6         91.6  2020 040         3        6 01   \n 2 2020-03-14 Alabama        12        123    2020 040         3        6 01   \n 3 2020-03-15 Alabama        23        173.   2020 040         3        6 01   \n 4 2020-03-16 Alabama        29        228.   2020 040         3        6 01   \n 5 2020-03-17 Alabama        39        285.   2020 040         3        6 01   \n 6 2020-03-18 Alabama        51        388.   2020 040         3        6 01   \n 7 2020-03-19 Alabama        78        609.   2020 040         3        6 01   \n 8 2020-03-20 Alabama       106       1031.   2020 040         3        6 01   \n 9 2020-03-21 Alabama       131       1738.   2020 040         3        6 01   \n10 2020-03-22 Alabama       157       2666.   2020 040         3        6 01   \n# ℹ 3,182 more rows\n# ℹ 61 more variables: COUNTY &lt;chr&gt;, CTYNAME &lt;chr&gt;, ESTIMATESBASE2020 &lt;dbl&gt;,\n#   NPOPCHG2020 &lt;dbl&gt;, NPOPCHG2021 &lt;dbl&gt;, NPOPCHG2022 &lt;dbl&gt;, NPOPCHG2023 &lt;dbl&gt;,\n#   BIRTHS2020 &lt;dbl&gt;, BIRTHS2021 &lt;dbl&gt;, BIRTHS2022 &lt;dbl&gt;, BIRTHS2023 &lt;dbl&gt;,\n#   DEATHS2020 &lt;dbl&gt;, DEATHS2021 &lt;dbl&gt;, DEATHS2022 &lt;dbl&gt;, DEATHS2023 &lt;dbl&gt;,\n#   NATURALCHG2020 &lt;dbl&gt;, NATURALCHG2021 &lt;dbl&gt;, NATURALCHG2022 &lt;dbl&gt;,\n#   NATURALCHG2023 &lt;dbl&gt;, INTERNATIONALMIG2020 &lt;dbl&gt;, …\n\n## 6.4. \n\nggplot(state_covid_data, aes(x = date, y = rolling_mean_per_capita, color = state)) +\n  geom_line(size = 1, na.rm = TRUE) +\n  labs(title = \"7-Day Rolling Average of New Covid Cases per Capita\",\n       x = \"Date\",\n       y = \"7-Day Rolling Average of Cases per Capita\",\n       color = \"State\") +\n  scale_color_brewer(palette = \"Set1\") +\n  theme_minimal(base_size = 15) + \n  theme(legend.position = \"right\",\n        plot.title = element_text(hjust = 0.5, size = 18),\n        axis.title = element_text(size = 14),\n        axis.text = element_text(size = 12))\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\n\n\n\n\n\n\n\nQuestion 6.5. Scaling covid cases by population provides a more accurate comparison between the four states. Ohio and New York have a larger population, and scaling makes covid case rates appear better. Smaller population states like Colorado and Alabama look slightly worse when viewed per capita."
  },
  {
    "objectID": "lab-03.html#question-7-space-and-time",
    "href": "lab-03.html#question-7-space-and-time",
    "title": "Lab 3: COVID-19",
    "section": "Question 7: Space and Time",
    "text": "Question 7: Space and Time\n\noptions(repos = c(CRAN = \"https://cloud.r-project.org\"))\n\n\nlibrary(readr)\nlocation_data &lt;- read_csv('https://raw.githubusercontent.com/mikejohnson51/csu-ess-330/refs/heads/main/resources/county-centroids.csv')\n\nRows: 3221 Columns: 3\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): fips\ndbl (2): LON, LAT\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nlocation_data\n\n# A tibble: 3,221 × 3\n   fips     LON   LAT\n   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;\n 1 01061  -85.8  31.1\n 2 08125 -102.   40.0\n 3 17177  -89.7  42.4\n 4 28153  -88.7  31.6\n 5 34041  -75.0  40.9\n 6 46051  -96.8  45.2\n 7 51013  -77.1  38.9\n 8 21007  -89.0  37.1\n 9 37091  -77.0  36.4\n10 13057  -84.5  34.2\n# ℹ 3,211 more rows\n\nmerged_covid_location_data &lt;- full_join(location_data, data, by = \"fips\")\n\nlibrary(lubridate)\n\nmerged_covid_location_data &lt;- merged_covid_location_data %&gt;%\n  mutate(date = as.Date(date, format=\"%Y-%m-%d\"),\n         month = format(date, \"%m\"))\n\nmerged_covid_location_data &lt;- merged_covid_location_data %&gt;%\n  arrange(state, county, date) %&gt;%\n  group_by(state, county) %&gt;%\n  mutate(daily_cases = cases - lag(cases, default = 0)) \n \n\nmerged_covid_location_data &lt;- merged_covid_location_data %&gt;%\n  group_by(date) %&gt;%\n  mutate(\n    total_cases = sum(daily_cases, na.rm = TRUE),\n    average_x = sum(LON * cases, na.rm = TRUE) / sum(cases, na.rm = TRUE),\n    average_y = sum(LAT * cases, na.rm = TRUE) / sum(cases, na.rm = TRUE)\n  ) \n  \n \n\nmerged_covid_location_data &lt;- merged_covid_location_data %&gt;%\n  group_by(month) %&gt;%\n  mutate(monthly_cases = sum(daily_cases, na.rm = TRUE)) \n  \n  \ninstall.packages(\"maps\")\n\nInstalling package into 'C:/Users/leila/AppData/Local/R/win-library/4.4'\n(as 'lib' is unspecified)\n\n\npackage 'maps' successfully unpacked and MD5 sums checked\n\n\nWarning: cannot remove prior installation of package 'maps'\n\n\nWarning in file.copy(savedcopy, lib, recursive = TRUE): problem copying\nC:\\Users\\leila\\AppData\\Local\\R\\win-library\\4.4\\00LOCK\\maps\\libs\\x64\\maps.dll to\nC:\\Users\\leila\\AppData\\Local\\R\\win-library\\4.4\\maps\\libs\\x64\\maps.dll:\nPermission denied\n\n\nWarning: restored 'maps'\n\n\n\nThe downloaded binary packages are in\n    C:\\Users\\leila\\AppData\\Local\\Temp\\Rtmp0OdAuy\\downloaded_packages\n\nlibrary(maps)\n\nWarning: package 'maps' was built under R version 4.4.3\n\n\n\nAttaching package: 'maps'\n\nThe following object is masked from 'package:purrr':\n\n    map\n\nlibrary(ggplot2)\n\n\nusa_map &lt;- map_data(\"state\")\n\nmirror_x &lt;- -88\nmirror_y &lt;- 37.5\n\nggplot() +\n  borders(\"state\", fill = \"lightblue\", colour = \"black\") +\n  coord_fixed() +\n  geom_point(data = merged_covid_location_data, aes(x =2 * mirror_x - average_x, y =2 * mirror_y - average_y, color = month, size = total_cases), alpha = 0.7) +\n  labs(title = \"Weighted Mean Centers of Covid-19 Cases\",\n       subtitle = \"Colored by Month and Sized by Total Cases per Day\",\n        x = \"Longitude\", \n        y = \"Latitude\",\n        size = \"Total Cases\") +\n  theme_minimal() +\n  scale_color_viridis_d(option = \"D\") +\n  theme(legend.position = \"bottom\")\n\nWarning: Removed 11 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\n\n\n\n\n\n\n\nIn general, the shift of Covid 19 cases moves down the west coast, east across the southeast, and then up the east coast. Possible drivers of this movement include the presence of large urban centers or cities. These masses of dense populations drive fast contraction of covid between people, facilitating the spread of the virus."
  }
]